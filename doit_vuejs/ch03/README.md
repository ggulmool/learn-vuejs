# 3장 화면을 개발하기 위한 필수단위(인스턴스 & 컴포넌트)

## 뷰 인스턴스
- 뷰로 화면을 개발하기 위해 필수적으로 생성해야 하는 기본단위
- 뷰 인스턴스 생성
```
new Vue({
    ...
});
```
- 뷰 인스턴스 옵션 속성
    - data : 화면에 매핑할 데이터
    - el : 뷰로 만든 화면이 그려지는 시작점
    - template : 화면에 표시할 html, css 등의 마크업 요소를 정의하는 속성
    - methods : 화면 로직 제어와 관계된 메서드를 정의하는 속성
    - created : 뷰 인스턴스가 생성되자마자 실행할 로직을 정의할 수 있는 속성
    
- 뷰 인스턴스의 유효 범위
    - 뷰 인스턴스를 생성하면 HTML의 특정 범위 안에서만 옵션 속성들이 적용됨
    - el 속성과 밀접한 관계
    
- 뷰 인스턴스 생성 후 과정
    - 뷰 라이브러리 로딩
    - 인스턴스 객체 생성
    - 특정 화면 요소에 인스턴스를 붙임
    - 인스턴스 내용이 화면 요소로 변환
    - 변환된 화면 요소를 사용자가 최종 확인 (인스턴스 유효범위 안에서만 동작)
    
## 뷰 컴포넌트
### 컴포넌트란
- 조합하여 화면을 구성할 수 있는 블록(화면의 특정 영역)
    - 컴포넌트를 활용하면 화면을 빠르게 구조화하여 일괄적인 패턴으로 개발할 수 있다.
    - 화면의 영역을 컴포넌트로 쪼개서 재활용할 수 있는 형태로 관리하면 나중에 소스 관리 측면에 있어서 좋다.
- 뷰에서는 웹화면을 구성할 때 흔히 내비게이션바, 테이블, 리스트, 인풋박스 등과 같은 화면 구성요소들을 잘게 쪼개어 컴포넌트로 관리
    - 참고로 컴포넌트 간의 관계는 자료구조의 트리모양과 유사 

### 컴포넌트 등록하기 
- 전역컴포넌트 등록
    - 뷰라이브러리를 로딩하고 나면 접근 가능한 Vue변수를 이용하여 등록
    - 컴포넌트 이름은 template속성에서 사용할 HTML 사용자 정의태그 이름을 의미

```javascript
Vue.component('컴포넌트이름', {
    //컴포넌트 내용 : 컴포넌트 태그가 실제 화면의 HTML 요소로 변환될 때 표시될 속성들을 작성 template, data, methods
})
```
[전역 컴포넌트 예제](./2_vue_component_global.html)    

- 지역컴포넌트 등록
    - 전역컴포넌트 등록과는 다르게 인스턴스에 `components속성`을 추가하고 등록할 컴포넌트 이름과 내용을 정의하면 된다.
```javascript
new Vue({
    components: {
        '컴포넌트 이름': 컴포넌트 내용
    }
})
```
[지역 컴포넌트 예제](./3_vue_component_local.html)

- 지역 컴포넌트와 전역 컴포넌트와의 차이 
    - 인스턴스의 유효범위란 HTML의 특정 범위 안에서만 인스턴스의 내용이 유효하다.
    - 두번째 인스턴스 영역인 <div id="app2">의 범위 안에서는 지역컴포넌트가 인식되지 않아 오류 발생

[지역 컴포넌트와 전역 컴포넌트와의 차이 예제](./4_vue_local_and_global_component.html)


### 뷰 컴포넌트 통신 
- 컴포넌트 간 통신과 유효범위 
    - Vue.js의 경우 컴포넌트로 화면을 구성하므로 같은 웹페이지라도 데이터 공유x
    - 컴포넌트마다 자체적으로 고유한 유효범위(scope)를 갖기 때문에
    - 각 컴포넌트의 유효범위가 독립적이기 때문에 다른 컴포넌트의 값을 직접적으로 참조할 수 없다.

[컴포넌트 유효 범위증명 예제](./5_vue_component_scope.html)

- 상하위 컴포넌트 관계
    - 뷰 프레임워크 자체에서 정의한 컴포넌트 데이터 전달방법을 따라야 한다.
    - 기본적인 전달 방법은 상위(부모) - 하위(자식)컴포넌트간의 데이터 전달 방법 
    - 상위에서 하위로는 props라는 특별한 속성을 전달
    - 하위에서 상위로는 기본적으로 이벤트만 전달
- 상위에서 하위 컴포넌트로 데이터 전달하기
    - `props` 속성은 상위 컴포넌트에서 하위 컴포넌트로 데이터를 전달할 때 사용하는 속성 
    - 그런다음 상위 컴포넌트의 HTML코드에 등록된 child-component 태그에 v-bind속성을 추가 
```javascript
Vue.component('child-component', {
    props: ['props 속성 이름']
})
```
```html
<child-component v-bind:props 속성이름="상위 컴포넌트의 data속성"></child-component>
```
[props 속성을 사용한 데이터 전달 예제](./6_vue_props_send_data.html)

- 하위에서 상위 컴포넌트로 이벤트 전달하기 
    - 이벤트를 발생시켜(event emit) 상위 컴포넌트에 신호를 보낸다.
    - 상위 컴포넌트에서 하위 컴포넌트의 특정 이벤트가 발생하기를 기다리고 있다가 하위 컴포넌트에서 특정 이벤트가 발생하면 상위 컴포넌트에서 해당 이벤트를 수신하여 상위 컴포넌트의 메서드를 호출한다.
    - 이벤트 발생과 수신은 $emit()과 v-on:속성을 사용

```javascript
// 이벤트 발생
this.$emit('이벤트명')
```

```HTML
<!-- 이벤트 수신 -->
<child-component v-on:이벤트명="상위 컴포넌트의 메서드명"></child-component>
```

[이벤트를 발생시키고 수신하기 예제](./7_vue_event_emit.html)

- 관계 없는 컴포넌트간 통신 (이벤트 버스) 
    - 이벤트버스(EventBus)는 개발자가 지정한 2개의 컴포넌트 간에 데이터를 주고받을 수 있는 방법이다.
    - 이벤트버스를 이용하면 상-하위 관계를 유지하고 있지 않아도 데이터를 한컴포넌트에서 다른 컴포넌트로 전달할 수 있다.
    - 이벤트버스를 활용하면 props속성을 이용하지 않고도 원하는 컴포넌트 간에 직접적으로 데이터를 전달할 수 있어 편리하지만 컴포넌트가 많아지면 어디서 어디로 보냈는지 관리가 되지 않는 문제 발생
    - 이 문제를 해결하기 위한 뷰엑스(VueX)라는 상태 관리 도구 필요 
```javascript
// 이벤트 버스를 위한 추가 인스턴스 1개 생성 
var eventBus = new Vue();

// 이벤트를 보내는 컴포넌트 
methods: {
    메서드명:function() {
        eventBus.$emit('이벤트명', 데이터);
    }
}

// 이벤트를 받는 컴포넌트 
methods: {
    created: function() {
        eventBus.$on('이벤트명', function(데이터){
            로직
        })
    }
}
```

[이벤트 버스 구현하기 에제](./8_vue_event_bus.html)